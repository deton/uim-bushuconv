uim-bushuconv
=============

uim-bushuconvは、部首合成変換を行うための
[uim](http://code.google.com/p/uim/)用IMです。

uim-tutcodeの対話的な部首合成変換機能を使っています。

インストール
============

./install.sh

準備
====

uim-pref-gtkやuim-pref-qt4を起動し、
「全体設定」→「使用可能にする入力方式」を編集し、
"bushuconv"を有効にしてください。

キーボードを使ってbushuconv IMに切り替えるには、
「ホットキーによる入力方式の一時切り替えを有効にする」を
チェックしてください。

「TUT-Code」→「対話的な部首合成変換を有効にする」にチェックを入れた上で、
部首合成変換辞書ファイルのパスを「bushu.index2ファイル」と
「bushu.expandファイル」に設定してください。
部首合成変換辞書は、http://deton.github.com/uim-bushuconv/tc-bushudic-2.3.1-22.6.tar.bz2 からダウンロード可能です。

使用方法
========

uim-toolbarや「一時切り替えキー」を使って、bushuconv IM
(アイコン: ![アイコン](https://github.com/deton/uim-bushuconv/raw/master/pixmaps/bushuconv.png))
に切り替えます。

(1)最初に、部首の画数に対応するキーを入力してください。
画数ごとに部首を分けています。

![例0](http://deton.github.com/uim-bushuconv/bushuconv-top.png)

例1: `4`キーを入力。画数4の部首候補が候補ウィンドウに表示されます。

![例1](http://deton.github.com/uim-bushuconv/bushuconv-4.png)

最初に入力するキーと画数の対応は以下。

* 1    画数1の部首候補
* 2    画数2の部首候補
* 3    画数3の部首候補
* 4    画数4の部首候補
* 5    画数5の部首候補
* 6    画数6の部首候補
* 7    画数7の部首候補
* 8    画数8の部首候補
* 9    画数9の部首候補
* 0    画数10の部首候補
* q    画数11の部首候補
* w    画数12の部首候補
* e    画数13の部首候補
* r    画数14の部首候補
* t    画数15の部首候補
* y    画数17の部首候補
* u    その他の部首候補

(2)次に、候補ウィンドウに表示されている、その画数の部首候補から、
目あての部首を選択するか、
候補ウィンドウ上で表示されているラベルキーを入力してください。

例2: `v`キーを入力。部首として、"木"を選択。

(3)そうすると、選択された部首を使って合成可能な漢字の候補が表示されます。
候補ウィンドウに表示された中から漢字を選ぶと確定されます。

例3: 漢字候補として、「來杏栄楽橿樺株柑棺閑机棋...」が表示されます。

![例3](http://deton.github.com/uim-bushuconv/bushuconv-4v.png)

合成される漢字の候補が大量にある場合など、
続けて新たな部首を入力((1)からの手順と同様)すると、
入力した全ての部首を使って合成可能な漢字の候補が表示されます。

例4: `3`キーを入力。画数3の部首候補が候補ウィンドウに表示されます。

![例4](http://deton.github.com/uim-bushuconv/bushuconv-4v3.png)

例5: `t`キーを入力。部首として、"口"を選択。

例6: 漢字候補として、「杏呆格桔梧槍枷枴枳枸桾椥...」が表示されます。

![例6](http://deton.github.com/uim-bushuconv/bushuconv-4v3t.png)

例7: `l`キーを入力。「枳」を確定。

なお、新たに入力した部首を組み合わせると何も合成できない場合は、
その部首は部首リストに追加されません。

例8: 例6の状態で、`5` `1` と入力して、部首として"央"を選択しても、
"央"は部首リストに追加されず、"木口"を対象とした漢字候補が再表示されます。

キーと処理の対応
================

* Ctrl+g  デフォルトのIMに切り替える
* ~       デフォルトのIMに切り替える

カスタマイズ項目
================

* コミット後にデフォルトIMに切り替えるかどうか (デフォルト: #f)

カスタマイズ項目(uim-tutcode)
-----------------------------
uim-tutcodeの対話的な部首合成変換機能を使っているので、
uim-tutcode側の設定が反映されます。

* 部首選択時の候補表示数:記号モードにおいて候補ウィンドウに一度に表示する候補数 (縦・横候補ウィンドウ時のデフォルト: 10)
* 部首から合成される漢字候補表示数:補完/予測において候補ウィンドウに一度に表示する候補数 (縦・横候補ウィンドウ時のデフォルト: 10)

備考
====

[uim-tutcodeの対話的な部首合成変換機能](http://code.google.com/p/uim-doc-ja/wiki/UimTutcode#%E5%AF%BE%E8%A9%B1%E7%9A%84%E3%81%AA%E9%83%A8%E9%A6%96%E5%90%88%E6%88%90%E5%A4%89%E6%8F%9B)
を使っています。
対話的な部首合成変換機能は、
もともとEmacs用T-Code入力環境tc2で作られたものです。
つまり、T-Codeで直接入力可能な漢字を部品として使って
漢字を合成することを意図したものなので、
漢字辞典の部首とは異なる場合があります
(例:"5"のように、形を使っているもの)。
